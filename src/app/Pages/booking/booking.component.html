<section class="bookingPage">
  <div class="booking-layout">
    <h1>Book a Table</h1>
    <p>We consider all the drivers of change and give you the components you need to create a truly unique experience.</p>

    <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="col-md-6">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="username" formControlName="username" placeholder="Enter your Username" required>
            <label for="username">Enter your Username</label>
            <div *ngIf="bookingForm.get('username')?.invalid && (bookingForm.get('username')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('username')?.hasError('required')">Username is required.</span>
              <span *ngIf="bookingForm.get('username')?.hasError('backend')">{{ bookingForm.get('username')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="phone" formControlName="phone" placeholder="Enter your Phone" required>
            <label for="phone">Enter your Phone</label>
            <div *ngIf="bookingForm.get('phone')?.invalid && (bookingForm.get('phone')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('phone')?.hasError('required')">Phone is required.</span>
              <span *ngIf="bookingForm.get('phone')?.hasError('backend')">{{ bookingForm.get('phone')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-floating mb-3">
            <input type="date" class="form-control" id="date" formControlName="date" placeholder="Select Date" required>
            <label for="date">Select Date</label>
            <div *ngIf="bookingForm.get('date')?.invalid && (bookingForm.get('date')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('date')?.hasError('required')">Please select a valid date (today or within 3 months).</span>
              <span *ngIf="bookingForm.get('date')?.hasError('backend')">{{ bookingForm.get('date')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-floating mb-3">
            <input type="text" class="form-control" id="time" formControlName="time" placeholder="Select Time" required>
            <label for="time">Select Time (e.g., 12:00 PM)</label>
            <div *ngIf="bookingForm.get('time')?.invalid && (bookingForm.get('time')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('time')?.hasError('required')">Please enter time in format (hh:mm AM/PM).</span>
              <span *ngIf="bookingForm.get('time')?.hasError('backend')">{{ bookingForm.get('time')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="form-floating mb-3">
            <input type="number" class="form-control" id="total_person" formControlName="total_person" placeholder="Total Persons" required min="1">
            <label for="total_person">Total Persons</label>
            <div *ngIf="bookingForm.get('total_person')?.invalid && (bookingForm.get('total_person')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('total_person')?.hasError('required')">Please enter at least one person.</span>
              <span *ngIf="bookingForm.get('total_person')?.hasError('backend')">{{ bookingForm.get('total_person')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="form-floating mb-3">
            <textarea class="form-control" id="notes" formControlName="notes" placeholder="Notes" style="height: 100px"></textarea>
            <label for="notes">Notes (Optional)</label>
            <div *ngIf="bookingForm.get('notes')?.invalid && (bookingForm.get('notes')?.touched || showErrorMessages)" class="text-danger">
              <span *ngIf="bookingForm.get('notes')?.hasError('backend')">{{ bookingForm.get('notes')?.getError('backend') }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="d-grid gap-2">
        <button class="btn custom-btn" type="submit">Book Now</button>
      </div>

      <div *ngIf="serverError" class="text-danger">{{ serverError }}</div>
    </form>
  </div>

  <div class="iframe-container">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3153.574586121072!2d-122.42618448468118!3d37.7757862797605!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8085808b536403b9%3A0x3f8b2d6e0c616aa8!2sYour%20Restaurant%20Name!5e0!3m2!1sen!2sus!4v1633451620403!5m2!1sen!2sus"
      frameborder="0"
      class="booking-iframe"
      allowfullscreen>
    </iframe>
  </div>
</section>
